# fzf Usage Guide (Zsh)

このドキュメントでは、現在の Zsh 環境における `fzf` の設定、ショートカットキー、およびラッパーコマンド `fz` の使用方法についてまとめています。

## 1. キーボードショートカット (Shortcuts)

`.zsh/fzf.zsh` で設定されている標準のウィジェットおよびキーバインドです。

| キー (Key) | 機能 (Function) | 説明 (Description) |
| :--- | :--- | :--- |
| **`Ctrl + R`** | **コマンド履歴検索** | 過去のコマンド履歴を検索して入力します。<br>- **`Ctrl + Y`**: 選択したコマンドをクリップボードにコピーして終了します。<br>- プレビューウィンドウでコマンド全体を確認できます。 |
| **`Ctrl + T`** | **ファイル検索** | カレントディレクトリ以下のファイルを検索してコマンドラインに挿入します。<br>- **`Ctrl + /`**: プレビューウィンドウの表示切替 (down/hidden)。<br>- `bat` によるシンタックスハイライト付きプレビューが表示されます。 |
| **`Alt + C`** | **ディレクトリ移動** | ディレクトリを検索して `cd` します。<br>※ macOS では `ç` キーとして認識される場合があります。 |

> **Note:** デフォルトの検索コマンドとして `fd` (隠しファイル含む、`.git` 除外) が使用されています。

## 2. `fz` コマンド (Wrapper Command)

`.zsh/functions/fz` で定義されている多機能ラッパーコマンドです。様々なリソースを検索・操作できます。

### 基本的な使い方
```zsh
fz <subcommand> [options]
```

### サブコマンド一覧

| サブコマンド | 機能 | 詳細・操作 |
| :--- | :--- | :--- |
| **`fz branch`** | **Git Branch 切替** | ローカルブランチを検索し、選択したブランチに `git checkout` します。 |
| **`fz log`** | **Git Commit ログ検索** | コミットログをグラフ付きで検索します。<br>- **`Ctrl + Y`**: コミットハッシュをクリップボードにコピー。<br>- **`Enter`**: コミットの詳細 (`git show`) を表示。 |
| **`fz kill`** | **プロセス Kill** | 実行中のプロセスを検索して停止 (`kill`) します。<br>- **`TAB`**: 複数選択が可能。<br>- **`Enter`**: 選択したプロセスを kill (デフォルト signal 9)。 |
| **`fz docker`** | **Docker コンテナ接続** | 起動中のコンテナを検索し、`exec -it ... /bin/bash` (または `sh`) でログインします。 |
| **`fz history`** | **コマンド履歴実行** | `Ctrl + R` と似ていますが、選択すると即座にコマンドを実行するのではなく、プロンプトに入力された状態にします。 |
| **`fz env`** | **環境変数検索** | 環境変数を検索・表示します。<br>- **`Ctrl + Y`**: 定義 (`VAR=VAL`) をクリップボードにコピー (macOS)。 |
| **`fz cd`** | **ディレクトリ移動** | ディレクトリスタック (履歴) と `fd` による検索を組み合わせて移動します。<br>- 深さ制限 (Max depth: 3) があり、高速に動作します。 |
| **`fz pr`** | **GitHub PR 検索** | 現在のリポジトリの Pull Request を検索します (`gh` コマンド必須)。<br>- **`Enter`**: ターミナルで詳細を表示。<br>- **`Ctrl + O`**: ブラウザで開く。 |
| **`fz issue`** | **GitHub Issue 検索** | 現在のリポジトリの Issue を検索します (`gh` コマンド必須)。<br>- **`Enter`**: ターミナルで詳細を表示。<br>- **`Ctrl + O`**: ブラウザで開く。 |
| **`fz lazygit`** | **Lazygit 起動** | ホームディレクトリ以下の Git リポジトリを検索し、`lazygit` で開きます。 |
| **`fz find`** | **ファイルパス検索** | ファイルを検索し、パスを出力します。<br>- クリップボードにもコピーされます。 |
| **`fz vi`** / **`vim`** | **Vim で開く** | ファイルを検索し、`vim` で開きます。 |

## 3. その他の fzf 利用コマンド

以下のコマンドも `fzf` を利用したインタラクティブな選択機能を提供しています。

- **`switchsound`**: 音声入出力デバイスの切り替え。(`switchsound input` / `switchsound output`)
- **`todaymd`**: 日付プレフィックス付き Markdown メモの管理・編集。
- **`tmx`**: Tmux セッションの切替・アタッチ。
- **`display`**: 保存されたディスプレイ設定のロード。
- **`wtr`**: Git worktree の削除やディレクトリ移動。

---
**Configuration Files:**
- Settings: `@.zsh/fzf.zsh`
- Function: `@.zsh/functions/fz`
